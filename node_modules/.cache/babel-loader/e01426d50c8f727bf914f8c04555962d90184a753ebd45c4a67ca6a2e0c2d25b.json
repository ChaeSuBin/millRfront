{"ast":null,"code":"var _jsxFileName = \"/home/giparang/threadweb/fortune/client/src/pages/createNft.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { SetFileHash } from \"../components/uploadIDX/setFileHash\";\nimport { SetItemCpnt } from \"../components/uploadIDX/setItem\";\nimport { RightBranch } from \"../components/uploadIDX/rightBranch\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CreateNft = _ref => {\n  _s();\n  let {\n    web3\n  } = _ref;\n  const SEND_ADDR = sessionStorage.getItem('chainid');\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [itemHash, setHash] = useState(null);\n  const [plusUri, setRight] = useState();\n  const [loginFlag, setFlag] = useState(false);\n  useEffect(() => {\n    initCheck();\n  }, []);\n  const initCheck = async () => {\n    const balZero = await getUserBal();\n    checkLogined(balZero);\n  };\n  const getUserBal = async () => {\n    return new Promise(resolve => {\n      if (SEND_ADDR === null) {\n        resolve(true);\n      }\n      web3.eth.getBalance(SEND_ADDR).then(balanc => {\n        let count = 0;\n        do {\n          balanc /= 1000000;\n          ++count;\n        } while (count < 3);\n        if (balanc < 0.01) resolve(true);else resolve(false);\n      });\n    });\n  };\n  const checkLogined = balZero => {\n    if (balZero) {\n      setFlag(false);\n    } else {\n      setFlag(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loginFlag ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uC544\\uC774\\uD15C \\uC81C\\uBAA9/\\uC124\\uBA85/\\uC774\\uC6A9\\uBC94\\uC704 \\uC124\\uC815.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"title: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"title\",\n          onChange: evt => setTitle(evt.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"description: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"docudesc\",\n          rows: \"5\",\n          cols: \"55\",\n          placeholder: \"\\uC544\\uC774\\uD15C \\uC124\\uBA85\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\\r\",\n          onChange: evt => setDesc(evt.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RightBranch, {\n        pWire: rightInfo => setRight(rightInfo)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), itemHash == null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(SetFileHash, {\n          pWire: hash => setHash(hash)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(SetItemCpnt, {\n          title: title,\n          desc: desc,\n          toknUri: itemHash,\n          rightInfo: plusUri\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD310\\uB9E4 \\uC544\\uC774\\uD15C \\uC5C5\\uB85C\\uB4DC\\uB97C \\uC704\\uD55C \\uD3F4\\uB9AC\\uACE4 \\uCF54\\uC778(matic \\uCF54\\uC778)\\uC774 \\uBD80\\uC871\\uD569\\uB2C8\\uB2E4.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 51\n        }, this), \"\\uACC4\\uC815\\uC5D0 \\uD3F4\\uB9AC\\uACE4 \\uCF54\\uC778\\uC744 \\uCDA9\\uC804 \\uD6C4 \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD558\\uC5EC\\uC8FC\\uC2DC\\uAE30 \\uBC14\\uB78D\\uB2C8\\uB2E4.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n_s(CreateNft, \"go0PtnzjjDB8xpzpScKssDHllps=\");\n_c = CreateNft;\nvar _c;\n$RefreshReg$(_c, \"CreateNft\");","map":{"version":3,"names":["React","useState","useEffect","SetFileHash","SetItemCpnt","RightBranch","CreateNft","web3","SEND_ADDR","sessionStorage","getItem","title","setTitle","desc","setDesc","itemHash","setHash","plusUri","setRight","loginFlag","setFlag","initCheck","balZero","getUserBal","checkLogined","Promise","resolve","eth","getBalance","then","balanc","count","evt","target","value","rightInfo","hash"],"sources":["/home/giparang/threadweb/fortune/client/src/pages/createNft.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { SetFileHash } from \"../components/uploadIDX/setFileHash\";\nimport { SetItemCpnt } from \"../components/uploadIDX/setItem\";\nimport { RightBranch } from \"../components/uploadIDX/rightBranch\";\n\nexport const CreateNft = ({web3}) => {\n  const SEND_ADDR = sessionStorage.getItem('chainid');\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [itemHash, setHash] = useState(null);\n  const [plusUri, setRight] = useState();\n  const [loginFlag, setFlag] = useState(false);\n\n  useEffect(() => {\n    initCheck();\n  },[])\n\n  const initCheck = async() => {\n    const balZero = await getUserBal();\n    checkLogined(balZero);\n  }\n  const getUserBal = async() => {\n    return new Promise(resolve => {\n      if(SEND_ADDR === null){\n        resolve(true);\n      }\n      web3.eth.getBalance(SEND_ADDR).then(balanc => {\n        let count = 0;\n        do{\n          balanc /= 1000000;\n          ++count;\n        }while(count < 3)\n        if(balanc < 0.01)\n          resolve(true);\n        else\n          resolve(false);\n      })\n    })\n  }\n\n  const checkLogined = (balZero) => {\n    if(balZero){\n      setFlag(false);\n    }\n    else{\n      setFlag(true);\n    }\n  }\n\n  return(\n    <>\n      {loginFlag ? <><br/><br/><br/>\n        <h3>아이템 제목/설명/이용범위 설정.</h3>\n        <p>title: <input placeholder='title' onChange={(evt)=>setTitle(evt.target.value)}/></p>\n        <p>description: <br/>\n        <textarea name=\"docudesc\" rows='5' cols='55' placeholder=\"아이템 설명을 입력해주세요.&#13;\" \n          onChange={(evt) => setDesc(evt.target.value)}/></p>\n        <RightBranch pWire={(rightInfo)=>setRight(rightInfo)}/>\n        {itemHash == null ?\n          <>\n            <SetFileHash pWire={(hash)=>setHash(hash)} />\n          </> : <>\n            <SetItemCpnt title={title} desc={desc} toknUri={itemHash} rightInfo={plusUri}/>\n          </>\n        }  \n      </>:<>\n        <p>판매 아이템 업로드를 위한 폴리곤 코인(matic 코인)이 부족합니다.<br/>\n        계정에 폴리곤 코인을 충전 후 다시 시도하여주시기 바랍니다.</p>\n      </>}\n      \n    </>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}