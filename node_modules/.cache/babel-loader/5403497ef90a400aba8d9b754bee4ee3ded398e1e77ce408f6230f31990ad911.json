{"ast":null,"code":"import _regeneratorRuntime from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{SetFileHash}from\"../components/uploadIDX/setFileHash\";import{SetItemCpnt}from\"../components/uploadIDX/setItem\";import{RightBranch}from\"../components/uploadIDX/rightBranch\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var CreateNft=function CreateNft(_ref){var web3=_ref.web3;var SEND_ADDR=sessionStorage.getItem('chainid');var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),strLen=_useState6[0],setStrLen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),itemHash=_useState8[0],setHash=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),plusUri=_useState10[0],setRight=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loginFlag=_useState12[0],setFlag=_useState12[1];useEffect(function(){initCheck();},[]);var initCheck=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var balZero;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUserBal();case 2:balZero=_context.sent;checkLogined(balZero);case 4:case\"end\":return _context.stop();}}},_callee);}));return function initCheck(){return _ref2.apply(this,arguments);};}();var getUserBal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",new Promise(function(resolve){if(SEND_ADDR===null){resolve(true);}web3.eth.getBalance(SEND_ADDR).then(function(balanc){var count=0;do{balanc/=1000000;++count;}while(count<3);if(balanc<0.01)resolve(true);else resolve(false);});}));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function getUserBal(){return _ref3.apply(this,arguments);};}();var countString=function countString(value){setStrLen(value.length);if(value.length>120){alert('글자수는 최대 120자를 넘길 수 없습니다.');}else{setDesc(value);}};var checkLogined=function checkLogined(balZero){if(balZero){setFlag(false);}else{setFlag(true);}};return/*#__PURE__*/_jsx(_Fragment,{children:loginFlag?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC544\\uC774\\uD15C \\uC81C\\uBAA9/\\uC124\\uBA85/\\uC774\\uC6A9\\uBC94\\uC704 \\uC124\\uC815.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"title: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"title\",onChange:function onChange(evt){return setTitle(evt.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"description: \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"docudesc\",rows:\"5\",cols:\"55\",placeholder:\"\\uC5C5\\uB85C\\uB4DC\\uD560 \\uD30C\\uC77C\\uC758 \\uC124\\uBA85\\uC744 \\uAC04\\uB2E8\\uD788 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\\r\",onChange:function onChange(evt){return countString(evt.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),\"\\uC785\\uB825\\uAC00\\uB2A5: \",strLen,\"/120\"]}),/*#__PURE__*/_jsx(RightBranch,{pWire:function pWire(rightInfo){return setRight(rightInfo);}}),itemHash==null?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(SetFileHash,{pWire:function pWire(hash){return setHash(hash);}})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(SetItemCpnt,{title:title,desc:desc,toknUri:itemHash,rightInfo:plusUri})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uB85C\\uADF8\\uC778 \\uB418\\uC9C0 \\uC54A\\uC740 \\uC0AC\\uC6A9\\uC790\\uAC70\\uB098 \\uD310\\uB9E4 \\uC544\\uC774\\uD15C \\uC5C5\\uB85C\\uB4DC\\uB97C \\uC704\\uD55C \\uD3F4\\uB9AC\\uACE4 \\uCF54\\uC778(matic \\uCF54\\uC778)\\uC774 \\uBD80\\uC871\\uD569\\uB2C8\\uB2E4.\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uACC4\\uC815\\uC5D0 \\uD3F4\\uB9AC\\uACE4 \\uCF54\\uC778\\uC744 \\uCDA9\\uC804 \\uD6C4 \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD558\\uC5EC\\uC8FC\\uC2DC\\uAE30 \\uBC14\\uB78D\\uB2C8\\uB2E4.\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD14C\\uC2A4\\uD2B8 \\uCF54\\uC778\\uC758 \\uCDA9\\uC804\\uC740 \",/*#__PURE__*/_jsx(\"a\",{className:\"App-link\",href:\"https://mumbaifaucet.com/\",children:\"'\\uC5EC\\uAE30'\"}),\"\\uC5D0\\uC11C \\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]})})});};","map":{"version":3,"names":["React","useState","useEffect","SetFileHash","SetItemCpnt","RightBranch","CreateNft","web3","SEND_ADDR","sessionStorage","getItem","title","setTitle","desc","setDesc","strLen","setStrLen","itemHash","setHash","plusUri","setRight","loginFlag","setFlag","initCheck","getUserBal","balZero","checkLogined","Promise","resolve","eth","getBalance","then","balanc","count","countString","value","length","alert","evt","target","rightInfo","hash"],"sources":["/home/giparang/threadweb/fortune/client/src/pages/createNft.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { SetFileHash } from \"../components/uploadIDX/setFileHash\";\nimport { SetItemCpnt } from \"../components/uploadIDX/setItem\";\nimport { RightBranch } from \"../components/uploadIDX/rightBranch\";\n\nexport const CreateNft = ({web3}) => {\n  const SEND_ADDR = sessionStorage.getItem('chainid');\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [strLen, setStrLen] = useState(0);\n  const [itemHash, setHash] = useState(null);\n  const [plusUri, setRight] = useState();\n  const [loginFlag, setFlag] = useState(false);\n\n  useEffect(() => {\n    initCheck();\n  },[])\n\n  const initCheck = async() => {\n    const balZero = await getUserBal();\n    checkLogined(balZero);\n  }\n  const getUserBal = async() => {\n    return new Promise(resolve => {\n      if(SEND_ADDR === null){\n        resolve(true);\n      }\n      web3.eth.getBalance(SEND_ADDR).then(balanc => {\n        let count = 0;\n        do{\n          balanc /= 1000000;\n          ++count;\n        }while(count < 3)\n        if(balanc < 0.01)\n          resolve(true);\n        else\n          resolve(false);\n      })\n    })\n  }\n  const countString = (value) => {\n    setStrLen(value.length);\n    if(value.length > 120){\n      alert('글자수는 최대 120자를 넘길 수 없습니다.')\n    }\n    else{\n      setDesc(value);\n    }\n  }\n  const checkLogined = (balZero) => {\n    if(balZero){\n      setFlag(false);\n    }\n    else{\n      setFlag(true);\n    }\n  }\n\n  return(\n    <>\n      {loginFlag ? <><br/><br/><br/>\n        <h3>아이템 제목/설명/이용범위 설정.</h3>\n        <p>title: <input placeholder='title' onChange={(evt)=>setTitle(evt.target.value)}/></p>\n        <p>description: <br/>\n          <textarea name=\"docudesc\" rows='5' cols='55' placeholder=\"업로드할 파일의 설명을 간단히 입력해주세요.&#13;\" \n            onChange={(evt) => countString(evt.target.value)}/><br/>\n            입력가능: {strLen}/120\n        </p>\n        <RightBranch pWire={(rightInfo)=>setRight(rightInfo)}/>\n        {itemHash == null ?\n          <>\n            <SetFileHash pWire={(hash)=>setHash(hash)} />\n          </> : <>\n            <SetItemCpnt title={title} desc={desc} toknUri={itemHash} rightInfo={plusUri}/>\n          </>\n        }  \n      </>:<>\n        <p>로그인 되지 않은 사용자거나 판매 아이템 업로드를 위한 폴리곤 코인(matic 코인)이 부족합니다.<br/>\n        계정에 폴리곤 코인을 충전 후 다시 시도하여주시기 바랍니다.<br/>\n        테스트 코인의 충전은 <a className=\"App-link\" href=\"https://mumbaifaucet.com/\">'여기'</a>에서 할 수 있습니다.</p>\n      </>}\n      \n    </>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}