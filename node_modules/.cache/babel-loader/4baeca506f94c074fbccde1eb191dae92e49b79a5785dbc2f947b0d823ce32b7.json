{"ast":null,"code":"import _regeneratorRuntime from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,useState,useRef}from'react';import{useNavigate}from'react-router-dom';import{postUploadItemIdx,getUserId,putLogin}from'../../api';import{eventCreateItem,setNFTidx}from'../../utilityUnits/connMintService';import{SHA256}from'../../utilityUnits/SHA256';import{WaitModal}from'../waitModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var SetItemCpnt=function SetItemCpnt(_ref){var title=_ref.title,desc=_ref.desc,toknUri=_ref.toknUri,rightInfo=_ref.rightInfo;var SEND_ADDR=sessionStorage.getItem('chainid');var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),NumOfTokn=_useState2[0],setNumOfTokn=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setValue=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),PRIVATE_KEY=_useState6[0],setPrivKey=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalFlag=_useState8[0],setFlag=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),Royalty=_useState10[0],setLowest=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),active=_useState12[0],setActive=_useState12[1];var exclusiveParsing=function exclusiveParsing(){var result=rightInfo.split('/');//console.log(result[1]);\nif(result[1]==='Exclusive'){setActive(true);setNumOfTokn(1);}else setActive(false);};var setItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var royality,value,tokenUri,record;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:royality=parseInt(Royalty*100000)+'0000000000000';value=parseInt(price*100000)+'0000000000000';tokenUri=rightInfo+toknUri;if(!(title!==''&&desc!=='')){_context.next=16;break;}record={playerId:sessionStorage.getItem('userid'),playerPass:SHA256(PRIVATE_KEY)};_context.next=7;return putLogin(record);case 7:if(!_context.sent){_context.next=12;break;}setNFTidx(SEND_ADDR,PRIVATE_KEY,tokenUri,value,royality,NumOfTokn).then(function(result){console.log(result);});uploadItemIdx();_context.next=14;break;case 12:alert('Private Key Î•º Îã§Ïãú ÌôïÏù∏ ÌõÑ ÏãúÎèÑÌïòÏã≠ÏãúÏò§');setFlag(false);case 14:_context.next=18;break;case 16:setFlag(false);alert('Please enter the title and description of the item to be uploaded');case 18:case\"end\":return _context.stop();}}},_callee);}));return function setItem(){return _ref2.apply(this,arguments);};}();var uploadItemIdx=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_itemId){var userId,record;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUserId(SEND_ADDR);case 2:userId=_context2.sent;record={//itemId: parseInt(_itemId),\ntitle:title,desc:desc,hash:toknUri,userId:userId,fromAddr:SEND_ADDR};postUploadItemIdx(record).then(function(response){console.log('checka');if(response){setFlag(false);alert('üéâSuccessfully Created');navigate(\"/\");}});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function uploadItemIdx(_x){return _ref3.apply(this,arguments);};}();// const itemCreateEvtListener = async() => {\n//   eventCreateItem(SEND_ADDR).then(listen => {\n//     if(listen){\n//       uploadItemIdx(listen.itemId);\n//     }\n//   }).catch(err => {\n//     console.log(err);\n//   })\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC544\\uC774\\uD15C \\uD310\\uB9E4\\uC815\\uBCF4 \\uC785\\uB825\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"quantity: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"quantity of token\",onChange:function onChange(evt){return setNumOfTokn(evt.target.value);},disabled:active})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"price: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"price of token\",onChange:function onChange(evt){return setValue(evt.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"royalties: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"MATIC\",onChange:function onChange(evt){return setLowest(evt.target.value);},defaultValue:\"0\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"private Key: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"input your private key to mint nft\",onChange:function onChange(evt){return setPrivKey(evt.target.value);},size:\"45\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setFlag(true);setItem();},children:\"\\uD310\\uB9E4\\uC2DC\\uC791\"}),/*#__PURE__*/_jsx(WaitModal,{showFlag:modalFlag})]});};// const stopTimer = () => {\n//   clearInterval(intervalId);\n//   intervalId=null;\n//   count = 0;\n// }","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","postUploadItemIdx","getUserId","putLogin","eventCreateItem","setNFTidx","SHA256","WaitModal","SetItemCpnt","title","desc","toknUri","rightInfo","SEND_ADDR","sessionStorage","getItem","navigate","NumOfTokn","setNumOfTokn","price","setValue","PRIVATE_KEY","setPrivKey","modalFlag","setFlag","Royalty","setLowest","active","setActive","exclusiveParsing","result","split","setItem","royality","parseInt","value","tokenUri","record","playerId","playerPass","then","console","log","uploadItemIdx","alert","_itemId","userId","hash","fromAddr","response","evt","target"],"sources":["/home/giparang/threadweb/fortune/client/src/components/uploadIDX/setItem.js"],"sourcesContent":["import React from 'react';\nimport { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { postUploadItemIdx, getUserId, putLogin } from '../../api';\nimport { eventCreateItem, setNFTidx } from '../../utilityUnits/connMintService';\nimport { SHA256 } from '../../utilityUnits/SHA256';\nimport { WaitModal } from '../waitModal';\n\nexport const SetItemCpnt = ({title, desc, toknUri, rightInfo}) => {\n  const SEND_ADDR = sessionStorage.getItem('chainid');\n  const navigate = useNavigate();\n  const [NumOfTokn, setNumOfTokn] = useState();\n  const [price, setValue] = useState();\n  const [PRIVATE_KEY, setPrivKey] = useState(null);\n  const [modalFlag, setFlag] = useState(false);\n  const [Royalty, setLowest] = useState(0);\n  const [active, setActive] = useState(false);\n\n  const exclusiveParsing = () => {\n    let result = rightInfo.split('/');\n    //console.log(result[1]);\n    if(result[1] === 'Exclusive'){\n      setActive(true);\n      setNumOfTokn(1);\n    }\n    else\n      setActive(false);\n  }\n  const setItem = async() => {\n    const royality = parseInt(Royalty*100000)+'0000000000000';\n    const value = parseInt(price*100000)+'0000000000000';\n    const tokenUri = rightInfo+toknUri;\n    \n    if(title !== '' && desc !== '' ){\n      const record = {\n        playerId: sessionStorage.getItem('userid'),\n        playerPass: SHA256(PRIVATE_KEY)\n      }\n      if(await putLogin(record)){\n        setNFTidx(SEND_ADDR, PRIVATE_KEY, tokenUri, value, royality, NumOfTokn).then(result => {\n          console.log(result);})\n        uploadItemIdx();\n      }\n      else{\n        alert('Private Key Î•º Îã§Ïãú ÌôïÏù∏ ÌõÑ ÏãúÎèÑÌïòÏã≠ÏãúÏò§');\n        setFlag(false);}\n    }\n    else{\n      setFlag(false);\n      alert('Please enter the title and description of the item to be uploaded');\n    }\n  }\n  const uploadItemIdx = async(_itemId) => {\n    const userId = await getUserId(SEND_ADDR);\n    const record = {\n      //itemId: parseInt(_itemId),\n      title: title,\n      desc: desc,\n      hash: toknUri,\n      userId: userId,\n      fromAddr: SEND_ADDR\n    }\n    postUploadItemIdx(record).then(response => {\n      console.log('checka')\n      if(response){\n        setFlag(false);\n        alert('üéâSuccessfully Created');\n        navigate(\"/\");\n      }\n    })\n  }\n  // const itemCreateEvtListener = async() => {\n  //   eventCreateItem(SEND_ADDR).then(listen => {\n  //     if(listen){\n  //       uploadItemIdx(listen.itemId);\n  //     }\n  //   }).catch(err => {\n  //     console.log(err);\n  //   })\n  // }\n  return(\n    <>\n    {/* <button onClick={putDBtoknIDX}>temp</button> */}\n    <h3>ÏïÑÏù¥ÌÖú ÌåêÎß§Ï†ïÎ≥¥ ÏûÖÎ†•</h3>\n    <p>quantity: <input placeholder='quantity of token' onChange={(evt)=>setNumOfTokn(evt.target.value)} disabled={active}/></p>\n    <p>price: <input placeholder='price of token' onChange={(evt)=>setValue(evt.target.value)} /></p>\n    <p>royalties: <input placeholder='MATIC' onChange={(evt)=>setLowest(evt.target.value)} defaultValue='0'/></p>\n    <p>private Key: <input placeholder='input your private key to mint nft' onChange={(evt)=>setPrivKey(evt.target.value)} size='45'/></p>\n    <button onClick={() => {setFlag(true); setItem();}}>ÌåêÎß§ÏãúÏûë</button>\n    <WaitModal showFlag={modalFlag} />\n    </>\n  )\n}\n// const stopTimer = () => {\n//   clearInterval(intervalId);\n//   intervalId=null;\n//   count = 0;\n// }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}