{"ast":null,"code":"var _jsxFileName = \"/home/giparang/threadweb/fortune/client/src/components/createChainId.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport './modal.css';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getChainId, putChainId } from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CreateChainId = _ref => {\n  _s();\n\n  let {\n    uid,\n    web3\n  } = _ref;\n  const [modalFlag, setModal] = useState(false);\n  const [chainAccount, setAccount] = useState([]);\n\n  const createAccount = async () => {\n    const FROM_ADDR = await getChainId(uid);\n\n    if (FROM_ADDR === null) {\n      let accountKey = [];\n      const account = web3.eth.accounts.create();\n      const record = {\n        playerId: uid,\n        chainId: account.address\n      };\n      accountKey.push(account.address);\n      accountKey.push(account.privateKey);\n      setAccount(accountKey);\n      console.log(accountKey);\n      putChainId(record).then(result => {\n        if (result) {\n          setModal(true);\n        }\n      });\n    } else {\n      alert('이미 블록체인 지갑이 연동된 계정입니다');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: createAccount,\n      children: \"\\uC9C0\\uAC11 \\uB9CC\\uB4E4\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AlertModal, {\n      showFlag: modalFlag,\n      ADDR: chainAccount[0],\n      PRIVATE_KEY: chainAccount[1]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(CreateChainId, \"kmF2f4rRZJ9MQGTBgHSBjdKgiaU=\");\n\n_c = CreateChainId;\n\nconst AlertModal = _ref2 => {\n  _s2();\n\n  let {\n    showFlag,\n    ADDR,\n    PRIVATE_KEY\n  } = _ref2;\n  const navigate = useNavigate();\n\n  const closeBtn = () => {\n    sessionStorage.clear();\n    navigate('/signinpage');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: showFlag ?\n    /*#__PURE__*/\n    // showFlagがtrueだったらModalを表示する\n    _jsxDEV(\"div\", {\n      id: \"overlay\",\n      className: \"overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalcontents\",\n        className: \"modalcontents\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83C\\uDF89Successfuly Created\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 32\n          }, this), \"CHAIN ID: \", ADDR, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 27\n          }, this), \"PRIVATE KEY: \", PRIVATE_KEY, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 37\n          }, this), \"\\uBE44\\uBC00\\uD0A4\\uB294 \\uBD84\\uC2E4 \\uC2DC \\uB418\\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 32\n          }, this), \"\\uBC18\\uB4DC\\uC2DC \\uBA54\\uBAA8\\uC7A5 \\uB4F1 \\uC790\\uC2E0\\uB9CC\\uC774 \\uC54C \\uC218 \\uC788\\uB294 \\uACF3\\uC5D0 \\uC62E\\uACA8 \\uC800\\uC7A5\\uD558\\uC2ED\\uC2DC\\uC624.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 46\n          }, this), \"\\uBE44\\uBC00\\uD0A4\\uB294 \\uC808\\uB300\\uB85C \\uD0C0\\uC778\\uC5D0\\uAC8C \\uC54C\\uB824\\uC8FC\\uC9C0 \\uB9C8\\uC2ED\\uC2DC\\uC624.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 35\n          }, this), \"*\\uC7AC\\uB85C\\uADF8\\uC778 \\uD6C4 \\uC801\\uC6A9\\uB429\\uB2C8\\uB2E4.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: closeBtn,\n          children: \"confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) // showFlagがfalseの場合はModalは表示しない)\n\n  }, void 0, false);\n};\n\n_s2(AlertModal, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\n_c2 = AlertModal;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CreateChainId\");\n$RefreshReg$(_c2, \"AlertModal\");","map":{"version":3,"names":["React","useState","useNavigate","getChainId","putChainId","CreateChainId","uid","web3","modalFlag","setModal","chainAccount","setAccount","createAccount","FROM_ADDR","accountKey","account","eth","accounts","create","record","playerId","chainId","address","push","privateKey","console","log","then","result","alert","AlertModal","showFlag","ADDR","PRIVATE_KEY","navigate","closeBtn","sessionStorage","clear"],"sources":["/home/giparang/threadweb/fortune/client/src/components/createChainId.js"],"sourcesContent":["import React from 'react';\nimport './modal.css';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getChainId, putChainId } from '../api';\n\nexport const CreateChainId = ({uid, web3}) => {\n\n  const [modalFlag, setModal] = useState(false);\n  const [chainAccount, setAccount] = useState([]);\n\n  const createAccount = async() => {\n    const FROM_ADDR = await getChainId(uid);\n    if(FROM_ADDR === null){\n      let accountKey = [];\n      const account = web3.eth.accounts.create();\n      const record = { \n        playerId: uid,\n        chainId : account.address\n      }\n      accountKey.push(account.address);\n      accountKey.push(account.privateKey);\n      setAccount(accountKey);\n      console.log(accountKey);\n\n      putChainId(record).then(result => {\n        if(result){\n          setModal(true);\n        }\n      })\n    }\n    else{\n      alert('이미 블록체인 지갑이 연동된 계정입니다');\n    } \n  }\n  return(\n    <>\n      <button onClick={createAccount}>지갑 만들기</button>\n      <AlertModal \n        showFlag={modalFlag} \n        ADDR={chainAccount[0]} \n        PRIVATE_KEY={chainAccount[1]} />\n    </>\n  )\n}\n\nconst AlertModal = ({showFlag, ADDR, PRIVATE_KEY}) => {\n  const navigate = useNavigate();\n  const closeBtn = () => {\n    sessionStorage.clear();\n    navigate('/signinpage');\n  }\n  return(\n    <>{showFlag ? ( // showFlagがtrueだったらModalを表示する\n      <div id=\"overlay\" className='overlay'>\n        <div id=\"modalcontents\" className=\"modalcontents\">\n        <p>\n          🎉Successfuly Created<br/>\n          CHAIN ID: {ADDR}<br/>\n          PRIVATE KEY: {PRIVATE_KEY}<br/>\n          비밀키는 분실 시 되찾을 수 없습니다.<br/>\n          반드시 메모장 등 자신만이 알 수 있는 곳에 옮겨 저장하십시오.<br/>\n          비밀키는 절대로 타인에게 알려주지 마십시오.<br/>\n          *재로그인 후 적용됩니다.\n        </p>\n        <button onClick={closeBtn}>confirm</button>\n        </div>\n      </div>\n      ) : (\n        <></>// showFlagがfalseの場合はModalは表示しない)\n      )}\n    </>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}