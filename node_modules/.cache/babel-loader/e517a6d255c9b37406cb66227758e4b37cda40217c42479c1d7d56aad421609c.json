{"ast":null,"code":"import _regeneratorRuntime from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from'react-router-dom';import{putLogin,getMatchCode,getChainId,postTempuserTable}from\"../api\";import{CreateChainId}from\"../components/createChainId\";import{SHA256}from\"../utilityUnits/SHA256\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var LoginInput=function LoginInput(_ref){var triger=_ref.triger;var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),inputId=_useState2[0],setId=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),inputPass=_useState4[0],setPass=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),inputPassConfirm=_useState6[0],setConfirm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),findMode=_useState8[0],setFlag=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),inputVc=_useState10[0],setVc=_useState10[1];var keyPress=function keyPress(evt){if(evt.key==='Enter')submit();};var submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var hPass,record,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:hPass=SHA256(inputPass);record={playerId:inputId,playerPass:hPass};_context.next=4;return putLogin(record);case 4:result=_context.sent;if(result){sessionStorage.setItem('userid',inputId);getChainId(inputId).then(function(chainId){if(chainId!==null)sessionStorage.setItem('chainid',chainId);triger(true);navigate(\"/\");window.location.reload();});}else{alert('❗confirm your ID and PASS again');}case 6:case\"end\":return _context.stop();}}},_callee);}));return function submit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"login\"}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return setId(event.target.value);},name:\"id\",placeholder:\"id\"})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"pass: \",/*#__PURE__*/_jsx(\"input\",{onKeyPress:keyPress,type:\"password\",onChange:function onChange(event){return setPass(event.target.value);},name:\"pw\",placeholder:\"password\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:submit,children:\"login\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{style:{cursor:\"not-allowed\"},children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC8FC\\uC758: \\uC78A\\uC5B4\\uBC84\\uB9B0 Private Key\\uB294 \\uB418\\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{className:\"App-link\",href:\"https://millrnft/userregist\",children:\"CREATE ACCOUNT\"})]});};export var RegistInput=function RegistInput(_ref3){var web3=_ref3.web3;var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),inputId=_useState12[0],setId=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),inputVerif=_useState14[0],setCode=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),inputConfirm=_useState16[0],setConfirm=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),vcFlag=_useState18[0],setVcFlag=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),sendFlag=_useState20[0],setSFlag=_useState20[1];var sendVcode=function sendVcode(){postTempuserTable({playerId:inputId});setSFlag(true);};var verifBtn=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var matchResult;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getMatchCode(inputId,inputVerif);case 2:matchResult=_context2.sent;console.log(matchResult);setVcFlag(matchResult);if(matchResult)alert('인증되었습니다');else alert('잘못된 요청코드입니다 코드를 다시 확인하여 주십시오');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function verifBtn(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"id\",onChange:function onChange(evt){return setId(evt.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendVcode,children:\"\\uC778\\uC99D\\uBC88\\uD638 \\uC804\\uC1A1\"})]}),sendFlag?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC778\\uC99D\\uBC88\\uD638\\uAC00 \\uBA54\\uC77C\\uC8FC\\uC18C \",inputId,\" \\uB85C \\uC804\\uC1A1\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uC778\\uC99D\\uBC88\\uD638: \",/*#__PURE__*/_jsx(\"input\",{placeholder:\"verif\",onChange:function onChange(evt){return setCode(evt.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:verifBtn,children:\"\\uC778\\uC99D\\uD558\\uAE30\"})]}),vcFlag?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CreateChainId,{uid:inputId,web3:web3})}):/*#__PURE__*/_jsx(_Fragment,{})]});};","map":{"version":3,"names":["React","useState","useNavigate","putLogin","getMatchCode","getChainId","postTempuserTable","CreateChainId","SHA256","LoginInput","triger","navigate","inputId","setId","inputPass","setPass","inputPassConfirm","setConfirm","findMode","setFlag","inputVc","setVc","keyPress","evt","key","submit","hPass","record","playerId","playerPass","result","sessionStorage","setItem","then","chainId","window","location","reload","alert","event","target","value","cursor","RegistInput","web3","inputVerif","setCode","inputConfirm","vcFlag","setVcFlag","sendFlag","setSFlag","sendVcode","verifBtn","matchResult","console","log"],"sources":["/home/giparang/threadweb/fortune/client/src/pages/loginPage.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { putLogin, getMatchCode, getChainId, postTempuserTable } from \"../api\";\nimport { CreateChainId } from \"../components/createChainId\";\nimport { SHA256 } from \"../utilityUnits/SHA256\";\n\nexport const LoginInput = ({triger}) => {\n  const navigate = useNavigate();\n  const [inputId, setId] = useState();\n  const [inputPass, setPass] = useState();\n  const [inputPassConfirm, setConfirm] = useState();\n  const [findMode, setFlag] = useState(false);\n  const [inputVc, setVc] = useState(null);\n  \n  const keyPress = (evt) => {\n    if(evt.key === 'Enter') submit();\n  }\n  const submit = async() => {\n    const hPass = SHA256(inputPass);\n    const record = {\n      playerId: inputId,\n      playerPass: hPass\n    };\n    const result = await putLogin(record);\n    if(result){\n      sessionStorage.setItem('userid', inputId);\n\n      getChainId(inputId).then(chainId => {\n        if(chainId !== null)\n          sessionStorage.setItem('chainid', chainId);\n        triger(true);\n        navigate(\"/\");\n        window.location.reload();\n      })\n    }\n    else{\n      alert('❗confirm your ID and PASS again');\n    }\n  }\n  return(\n    <section>\n      <h2>login</h2>\n        <h5>Email: <input onChange={(event) => setId(event.target.value)} name=\"id\" placeholder='id'/></h5>\n        <h5>pass: <input  onKeyPress={keyPress} type='password' \n          onChange={(event) => setPass(event.target.value)} name=\"pw\" placeholder='password'/></h5>\n        <button onClick={submit}>login</button>\n        <br/><br/><a style={{cursor: \"not-allowed\"}}><p>주의: 잊어버린 Private Key는 되찾을 수 없습니다.</p></a>\n        <br/>\n        <a className=\"App-link\" href=\"https://millrnft/userregist\">CREATE ACCOUNT</a>\n    </section>\n  )\n}\n\nexport const RegistInput = ({web3}) => {\n  const [inputId, setId] = useState();\n  const [inputVerif, setCode] = useState();\n  const [inputConfirm, setConfirm] = useState();\n  const [vcFlag, setVcFlag] = useState(false);\n  const [sendFlag, setSFlag] = useState(false);\n  \n  const sendVcode = () => {\n    postTempuserTable({playerId: inputId});\n    setSFlag(true);\n  }\n  const verifBtn = async() => {\n    const matchResult = await getMatchCode(inputId, inputVerif);\n    console.log(matchResult);\n    setVcFlag(matchResult);\n    if(matchResult)\n      alert('인증되었습니다');\n    else\n      alert('잘못된 요청코드입니다 코드를 다시 확인하여 주십시오');\n  }\n\n  return(\n    <section>\n        <h4>Email: <input placeholder='id' onChange={(evt)=>setId(evt.target.value)}/>\n        <button onClick={sendVcode}>인증번호 전송</button></h4>\n        {sendFlag ? <p>인증번호가 메일주소 {inputId} 로 전송되었습니다.</p>:<></>}\n        <h4>인증번호: <input placeholder='verif' onChange={(evt)=>setCode(evt.target.value)}/>\n        <button onClick={verifBtn}>인증하기</button></h4>   \n        {vcFlag ? <>\n          <CreateChainId uid={inputId} web3={web3}/>\n        </>:<>\n        </>}\n    </section>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}