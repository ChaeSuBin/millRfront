{"ast":null,"code":"var _jsxFileName = \"/home/giparang/threadweb/fortune/client/src/pages/createNft.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { SetFileHash } from \"../components/uploadIDX/setFileHash\";\nimport { SetItemCpnt } from \"../components/uploadIDX/setItem\";\nimport { RightBranch } from \"../components/uploadIDX/rightBranch\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CreateNft = _ref => {\n  _s();\n  let {\n    web3\n  } = _ref;\n  const uid = sessionStorage.getItem('userid');\n  const SEND_ADDR = sessionStorage.getItem('chainid');\n  const [balance, setBalance] = useState(0);\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [itemHash, setHash] = useState(null);\n  const [plusUri, setRight] = useState();\n  const [loginFlag, setFlag] = useState(false);\n  useEffect(async () => {\n    const balZero = await getUserBal();\n    checkLogined(uid, balZero);\n  }, []);\n  const getUserBal = async () => {\n    return new Promise(resolve => {\n      web3.eth.getBalance(SEND_ADDR).then(balanc => {\n        let count = 0;\n        do {\n          balanc /= 1000000;\n          ++count;\n        } while (count < 3);\n        if (balanc < 0.01) resolve(true);else resolve(false);\n      });\n    });\n  };\n  const checkLogined = (uid, balZero) => {\n    if (uid === null || balZero) {\n      setFlag(false);\n    } else {\n      setFlag(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loginFlag ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uC544\\uC774\\uD15C \\uC81C\\uBAA9/\\uC124\\uBA85/\\uC774\\uC6A9\\uBC94\\uC704 \\uC124\\uC815.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"title: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"title\",\n          onChange: evt => setTitle(evt.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"description: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"docudesc\",\n          rows: \"5\",\n          cols: \"55\",\n          placeholder: \"\\uC544\\uC774\\uD15C \\uC124\\uBA85\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\\r\",\n          onChange: evt => setDesc(evt.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RightBranch, {\n        pWire: rightInfo => setRight(rightInfo)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), itemHash == null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(SetFileHash, {\n          pWire: hash => setHash(hash)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(SetItemCpnt, {\n          title: title,\n          desc: desc,\n          toknUri: itemHash,\n          rightInfo: plusUri\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD310\\uB9E4 \\uC544\\uC774\\uD15C \\uC5C5\\uB85C\\uB4DC\\uB97C \\uC704\\uD574 \\uB85C\\uADF8\\uC778\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n_s(CreateNft, \"P9GU9AwKAaKBFRvM2p8JQD/RlzA=\");\n_c = CreateNft;\nvar _c;\n$RefreshReg$(_c, \"CreateNft\");","map":{"version":3,"names":["React","useState","useEffect","SetFileHash","SetItemCpnt","RightBranch","CreateNft","web3","uid","sessionStorage","getItem","SEND_ADDR","balance","setBalance","title","setTitle","desc","setDesc","itemHash","setHash","plusUri","setRight","loginFlag","setFlag","balZero","getUserBal","checkLogined","Promise","resolve","eth","getBalance","then","balanc","count","evt","target","value","rightInfo","hash"],"sources":["/home/giparang/threadweb/fortune/client/src/pages/createNft.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { SetFileHash } from \"../components/uploadIDX/setFileHash\";\nimport { SetItemCpnt } from \"../components/uploadIDX/setItem\";\nimport { RightBranch } from \"../components/uploadIDX/rightBranch\";\n\nexport const CreateNft = ({web3}) => {\n  const uid = sessionStorage.getItem('userid');\n  const SEND_ADDR = sessionStorage.getItem('chainid');\n  const [balance, setBalance] = useState(0);\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [itemHash, setHash] = useState(null);\n  const [plusUri, setRight] = useState();\n  const [loginFlag, setFlag] = useState(false);\n\n  useEffect(async() => {\n    const balZero = await getUserBal();\n    checkLogined(uid, balZero);\n  },[])\n\n  const getUserBal = async() => {\n    return new Promise(resolve => {\n      web3.eth.getBalance(SEND_ADDR).then(balanc => {\n        let count = 0;\n        do{\n          balanc /= 1000000;\n          ++count;\n        }while(count < 3)\n        if(balanc < 0.01)\n          resolve(true);\n        else\n          resolve(false);\n      })\n    })\n  }\n\n  const checkLogined = (uid, balZero) => {\n    if(uid === null || balZero){\n      setFlag(false);\n    }\n    else{\n      setFlag(true);\n    }\n  }\n\n  return(\n    <>\n      {loginFlag ? <><br/><br/><br/>\n        <h3>아이템 제목/설명/이용범위 설정.</h3>\n        <p>title: <input placeholder='title' onChange={(evt)=>setTitle(evt.target.value)}/></p>\n        <p>description: <br/>\n        <textarea name=\"docudesc\" rows='5' cols='55' placeholder=\"아이템 설명을 입력해주세요.&#13;\" \n          onChange={(evt) => setDesc(evt.target.value)}/></p>\n        <RightBranch pWire={(rightInfo)=>setRight(rightInfo)}/>\n        {itemHash == null ?\n          <>\n            <SetFileHash pWire={(hash)=>setHash(hash)} />\n          </> : <>\n            <SetItemCpnt title={title} desc={desc} toknUri={itemHash} rightInfo={plusUri}/>\n          </>\n        }  \n      </>:<>\n        <p>판매 아이템 업로드를 위해 로그인이 필요합니다.</p>\n      </>}\n      \n    </>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}