{"ast":null,"code":"import MintServiceABI from '../contracts/MintService.json';\nimport Web3 from \"web3/dist/web3.min.js\";\n\nconst mintService = () => {\n  const web3 = new Web3('wss://ws-mumbai.matic.today');\n  const contract_Instance = new web3.eth.Contract(MintServiceABI, '0x306a271F178aD37083cDA734F3Aca694FF301B0F');\n  return contract_Instance;\n};\n\nexport const getSymbol = async web3 => {\n  return new Promise(resolve => {\n    mintService(web3).methods.symbol().call().then(symbol => {\n      resolve(symbol);\n    }, err => {\n      console.log('err: ', err);\n    });\n  });\n};\nexport const getTokenOwner = async toknId => {\n  return new Promise(resolve => {\n    mintService.methods.ownerOf(toknId).call().then(result => {\n      resolve(result);\n    });\n  });\n};\nexport const getOwnedToken = async (web3, ADDR) => {\n  return new Promise(resolve => {\n    mintService(web3).methods.getOwnedTokn(ADDR).call().then(result => {\n      resolve(result);\n    });\n  });\n};\nexport const getTokenUri = async (web3, toknId) => {\n  return new Promise(resolve => {\n    mintService(web3).methods.tokenURI(toknId).call().then(result => {\n      resolve(result);\n    });\n  });\n};\nexport const getTokenStatus = async (web3, toknId) => {\n  return new Promise(resolve => {\n    mintService(web3).methods.tradeNum(toknId).call().then(result => {\n      resolve(result);\n    });\n  });\n};\nexport const getAmountAll = async web3 => {\n  return new Promise(resolve => {\n    mintService(web3).methods.getAllToknNum().call().then(result => {\n      resolve(result);\n    });\n  });\n};\nexport const EstGasopenTokenBatch = async (web3, SEND_ADDR, fromId, toId, price) => {\n  const method = await mintService(web3).methods.openToknBatch(price, fromId, toId);\n  const estGas = await method.estimateGas({\n    from: SEND_ADDR\n  });\n  return estGas;\n};\n_c = EstGasopenTokenBatch;\nexport const openTokenBatch = async (web3, toknId, toToknId, price, SEND_ADDR, PRIVATE_KEY) => {\n  const chainId = await web3.eth.getChainId();\n  const nonce = await web3.eth.getTransactionCount(SEND_ADDR, 'latest');\n  const method = mintService(web3).methods.openToknBatch(price, toknId, toToknId);\n  const gasPrice = await web3.eth.getGasPrice();\n  const estGas = await method.estimateGas({\n    from: SEND_ADDR\n  });\n  const code = await method.encodeABI();\n  const tx = {\n    nonce: nonce,\n    chainId: chainId,\n    from: SEND_ADDR,\n    to: '0x306a271F178aD37083cDA734F3Aca694FF301B0F',\n    value: '0',\n    data: code,\n    gasPrice: gasPrice,\n    gas: estGas\n  };\n  signTrx(web3, tx, PRIVATE_KEY);\n};\n\nconst signTrx = (web3, tx, PRIVATE_KEY) => {\n  web3.eth.accounts.signTransaction(tx, PRIVATE_KEY).then(signedTx => {\n    web3.eth.sendSignedTransaction(signedTx.rawTransaction, function (error, hash) {\n      if (!error) if (!alert(`üéâ The hash of your transaction is:  ${hash}\\n Check Polygon Scan to view the status of your transaction!`)) console.log('complete');else console.log(\"‚ùóSomething went wrong while submitting your transaction:\", error);\n    });\n  });\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"EstGasopenTokenBatch\");","map":{"version":3,"names":["MintServiceABI","Web3","mintService","web3","contract_Instance","eth","Contract","getSymbol","Promise","resolve","methods","symbol","call","then","err","console","log","getTokenOwner","toknId","ownerOf","result","getOwnedToken","ADDR","getOwnedTokn","getTokenUri","tokenURI","getTokenStatus","tradeNum","getAmountAll","getAllToknNum","EstGasopenTokenBatch","SEND_ADDR","fromId","toId","price","method","openToknBatch","estGas","estimateGas","from","openTokenBatch","toToknId","PRIVATE_KEY","chainId","getChainId","nonce","getTransactionCount","gasPrice","getGasPrice","code","encodeABI","tx","to","value","data","gas","signTrx","accounts","signTransaction","signedTx","sendSignedTransaction","rawTransaction","error","hash","alert"],"sources":["/home/giparang/threadweb/fortune/client/src/utilityUnits/connMintService.js"],"sourcesContent":["import MintServiceABI from '../contracts/MintService.json';\nimport Web3 from \"web3/dist/web3.min.js\";\n\nconst mintService = () => {\n    const web3 = new Web3('wss://ws-mumbai.matic.today');\n    const contract_Instance = new web3.eth.Contract(\n      MintServiceABI, '0x306a271F178aD37083cDA734F3Aca694FF301B0F'\n    )\n    return contract_Instance;\n}\n\nexport const getSymbol = async(web3) => {\n    return new Promise(resolve => {\n        mintService(web3).methods.symbol().call().then(\n        symbol => {\n            resolve(symbol);\n        },err => { \n            console.log('err: ', err); \n        })\n    })\n}\nexport const getTokenOwner = async(toknId) => {\n    return new Promise(resolve => {\n        mintService.methods.ownerOf(toknId).call().then(\n            result => {\n                resolve(result);\n            }\n        )\n    })\n}\nexport const getOwnedToken = async(web3, ADDR) => {\n    return new Promise(resolve => {\n        mintService(web3).methods.getOwnedTokn(ADDR).call().then(\n            result => {\n                resolve(result);\n            }\n        )\n    })\n}\nexport const getTokenUri = async(web3, toknId) => {\n    return new Promise(resolve => {\n        mintService(web3).methods.tokenURI(toknId).call().then(\n            result => {\n                resolve(result);\n            }\n        )\n    })\n}\nexport const getTokenStatus = async(web3, toknId) => {\n    return new Promise(resolve => {\n        mintService(web3).methods.tradeNum(toknId).call().then(\n            result => {\n                resolve(result);\n            }\n        )\n    })\n}\nexport const getAmountAll = async(web3) => {\n    return new Promise(resolve => {\n        mintService(web3).methods.getAllToknNum().call().then(\n            result => {\n                resolve(result);\n            }\n        )\n    })\n}\nexport const EstGasopenTokenBatch = async(web3, SEND_ADDR, fromId, toId, price) => {\n    const method = await mintService(web3).methods.openToknBatch(price, fromId, toId);\n    const estGas = await method.estimateGas({from: SEND_ADDR});\n    return estGas;\n}\nexport const openTokenBatch = async(web3, toknId, toToknId, price, SEND_ADDR, PRIVATE_KEY) => {\n    const chainId = await web3.eth.getChainId();\n    const nonce = await web3.eth.getTransactionCount(SEND_ADDR, 'latest');\n\n    const method = mintService(web3).methods.openToknBatch(price, toknId, toToknId);\n    const gasPrice = await web3.eth.getGasPrice();\n    const estGas = await method.estimateGas({from: SEND_ADDR});\n    const code = await method.encodeABI();\n    \n    const tx = {\n        nonce: nonce,\n        chainId: chainId,\n        from: SEND_ADDR,\n        to: '0x306a271F178aD37083cDA734F3Aca694FF301B0F',\n        value: '0',\n        data: code,\n        gasPrice: gasPrice,\n        gas: estGas\n    }\n    signTrx(web3, tx, PRIVATE_KEY);\n}\nconst signTrx = (web3, tx, PRIVATE_KEY) => {\n    web3.eth.accounts.signTransaction(tx, PRIVATE_KEY).then(signedTx => {\n        web3.eth.sendSignedTransaction(signedTx.rawTransaction, function(error, hash) {\n            if (!error)\n              if(!alert(`üéâ The hash of your transaction is:  ${hash}\\n Check Polygon Scan to view the status of your transaction!`))\n                console.log('complete');\n            else\n              console.log(\"‚ùóSomething went wrong while submitting your transaction:\", error);\n        });\n    })\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}