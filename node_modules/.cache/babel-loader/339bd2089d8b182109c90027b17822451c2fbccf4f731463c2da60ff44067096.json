{"ast":null,"code":"import _regeneratorRuntime from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/giparang/threadweb/fortune/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{buyedToknChange,getUserId,putLogin}from'../../api';import{buyNFT}from'../../utilityUnits/connTradeService.js';import{SHA256}from'../../utilityUnits/SHA256';var intervalId=null;var count=0;export var buyToknTransfer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_price,_itemId,set_w_Flag,FROM_ADDR,PRIVATE_KEY){var record,value;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record={playerId:sessionStorage.getItem('userid'),playerPass:SHA256(PRIVATE_KEY)};_context.next=3;return putLogin(record);case 3:if(!_context.sent){_context.next=8;break;}value=parseInt(_price*100000)+'0000000000000';buyNFT(FROM_ADDR,PRIVATE_KEY,_itemId,value).then(function(result){if(result===true)updateToknIdx(FROM_ADDR);else{alert('거래에 필요한 폴리곤 코인이 부족합니다 \\n 코인을 충전한 후 다시 시도하여 주십시오');set_w_Flag(false);}});_context.next=10;break;case 8:alert(\"\\u26A0\\uFE0F Private Key \\uB97C \\uD655\\uC778 \\uD6C4 \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD558\\uC2ED\\uC2DC\\uC624\");set_w_Flag(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function buyToknTransfer(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments);};}();var updateToknIdx=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_buyerAddr){var userId,record;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUserId(_buyerAddr);case 2:userId=_context2.sent;record={userId:userId,fromAddr:_buyerAddr};buyedToknChange(record).then(function(result){if(result){if(!alert('🎉Successfully purchased'))window.location.reload();}});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function updateToknIdx(_x6){return _ref2.apply(this,arguments);};}();var stopTimer=function stopTimer(){clearInterval(intervalId);intervalId=null;};","map":{"version":3,"names":["buyedToknChange","getUserId","putLogin","buyNFT","SHA256","intervalId","count","buyToknTransfer","_price","_itemId","set_w_Flag","FROM_ADDR","PRIVATE_KEY","record","playerId","sessionStorage","getItem","playerPass","value","parseInt","then","result","updateToknIdx","alert","_buyerAddr","userId","fromAddr","window","location","reload","stopTimer","clearInterval"],"sources":["/home/giparang/threadweb/fortune/client/src/components/detailPages/toknTransfer.js"],"sourcesContent":["import { buyedToknChange, getUserId, putLogin } from '../../api';\nimport { buyNFT } from '../../utilityUnits/connTradeService.js'\nimport { SHA256 } from '../../utilityUnits/SHA256';\n\nlet intervalId = null;\nlet count = 0;\n\nexport const buyToknTransfer = async(_price, _itemId, set_w_Flag, FROM_ADDR, PRIVATE_KEY) => {\n  const record = {\n    playerId: sessionStorage.getItem('userid'),\n    playerPass: SHA256(PRIVATE_KEY)\n  }\n  if(await putLogin(record)){\n    const value = parseInt(_price*100000) + '0000000000000';\n    buyNFT(FROM_ADDR, PRIVATE_KEY, _itemId, value).then(result => {\n      if(result === true)\n        updateToknIdx(FROM_ADDR);\n      else{\n        alert('거래에 필요한 폴리곤 코인이 부족합니다 \\n 코인을 충전한 후 다시 시도하여 주십시오');\n        set_w_Flag(false)\n      }\n    })\n  }\n  else{\n    alert(`⚠️ Private Key 를 확인 후 다시 시도하십시오`);\n    set_w_Flag(false);\n  }\n}\n\nconst updateToknIdx = async(_buyerAddr) => {\n\tconst userId = await getUserId(_buyerAddr);\n\tconst record = {\n\t\tuserId: userId,\n    fromAddr: _buyerAddr\n\t}\n\tbuyedToknChange(record).then(result => {\n\t\tif(result){\n      if(!alert('🎉Successfully purchased'))\n        window.location.reload();\n\t\t}\n\t})\n}\nconst stopTimer = () => {\n  clearInterval(intervalId);\n  intervalId=null;\n}"],"mappings":"0QAAA,OAASA,eAAe,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,WAAW,CAChE,OAASC,MAAM,KAAQ,wCAAwC,CAC/D,OAASC,MAAM,KAAQ,2BAA2B,CAElD,GAAIC,WAAU,CAAG,IAAI,CACrB,GAAIC,MAAK,CAAG,CAAC,CAEb,MAAO,IAAMC,gBAAe,4FAAG,iBAAMC,MAAM,CAAEC,OAAO,CAAEC,UAAU,CAAEC,SAAS,CAAEC,WAAW,qIAChFC,MAAM,CAAG,CACbC,QAAQ,CAAEC,cAAc,CAACC,OAAO,CAAC,QAAQ,CAAC,CAC1CC,UAAU,CAAEb,MAAM,CAACQ,WAAW,CAChC,CAAC,uBACQV,SAAQ,CAACW,MAAM,CAAC,kDACjBK,KAAK,CAAGC,QAAQ,CAACX,MAAM,CAAC,MAAM,CAAC,CAAG,eAAe,CACvDL,MAAM,CAACQ,SAAS,CAAEC,WAAW,CAAEH,OAAO,CAAES,KAAK,CAAC,CAACE,IAAI,CAAC,SAAAC,MAAM,CAAI,CAC5D,GAAGA,MAAM,GAAK,IAAI,CAChBC,aAAa,CAACX,SAAS,CAAC,CAAC,IACvB,CACFY,KAAK,CAAC,iDAAiD,CAAC,CACxDb,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAC,+BAGFa,KAAK,yGAAmC,CACxCb,UAAU,CAAC,KAAK,CAAC,CAAC,uDAErB,kBApBYH,gBAAe,4DAoB3B,CAED,GAAMe,cAAa,6FAAG,kBAAME,UAAU,iKAChBvB,UAAS,CAACuB,UAAU,CAAC,QAApCC,MAAM,gBACNZ,MAAM,CAAG,CACdY,MAAM,CAAEA,MAAM,CACZC,QAAQ,CAAEF,UACb,CAAC,CACDxB,eAAe,CAACa,MAAM,CAAC,CAACO,IAAI,CAAC,SAAAC,MAAM,CAAI,CACtC,GAAGA,MAAM,CAAC,CACN,GAAG,CAACE,KAAK,CAAC,0BAA0B,CAAC,CACnCI,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC9B,CACD,CAAC,CAAC,yDACF,kBAZKP,cAAa,8CAYlB,CACD,GAAMQ,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtBC,aAAa,CAAC1B,UAAU,CAAC,CACzBA,UAAU,CAAC,IAAI,CACjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}